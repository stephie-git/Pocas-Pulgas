if (self.CavalryLogger) { CavalryLogger.start_js(["iZLozqm"]); }

__d("cometComposerValidateNoMediaCurrentlyUploading",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";var i=["NEW","QUEUED","UPLOADING"];function a(a){return(a.mediaAttachments||[]).some(function(a){return i.includes(a.state)})?h._("No puedes realizar ninguna publicaci\u00f3n mientras se cargan los archivos multimedia"):null}g["default"]=a}),98);
__d("useComposerSubmit",["fbt","CometRelay","VideoUploadSurface","cometUniqueID","cr:1526618","feedEditStoryLiveInsertUpdater","generateOptimisticResponse","getComposerLoggingPayload","ifRequireable","qex","react","requireDeferred","transformComposerViewStateToCreationData","transformComposerViewStateToMutationData","transformersArrayHelpers","useNotificationsTrackingString","useTriggerAccessibilityAlert"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react").useCallback,j=c("requireDeferred")("ComposerStoryCreateMutation").__setRef("useComposerSubmit"),k=c("requireDeferred")("ComposerStoryEditMutation").__setRef("useComposerSubmit"),l=c("qex")._("1221850")===!0;function a(a){var e=a.actorID,f=a.creationSessionID,g=d("CometRelay").useRelayEnvironment(),m=c("useTriggerAccessibilityAlert")(),n=i(function(c){b("cr:1526618")&&b("cr:1526618").onSubmitPostError(c.creationSessionID,d("VideoUploadSurface").VideoUploadSurfaceIDs.FEED);return function(b){a.onError(b,c)}},[a]),o=i(function(c){var e;b("cr:1526618")&&b("cr:1526618").onSubmitPostCompleted(c.creationSessionID,d("VideoUploadSurface").VideoUploadSurfaceIDs.FEED);e=(e=c.audience)==null?void 0:(e=e.privacy)==null?void 0:e.base_state;e===null||e===void 0?m(h._("Tu publicaci\u00f3n se ha compartido correctamente")):m(h._("Tu publicaci\u00f3n se ha compartido correctamente con {audience}",[h._param("audience",e)]));return function(b){a.onCompleted(b,c)}},[a,m]),p=c("useNotificationsTrackingString")(),q=i(function(i){var q=i.storyID;if(q!=null)c("transformComposerViewStateToMutationData")(a.unalteredBeginningViewState||null,i,d("transformersArrayHelpers").transformersArrayToMutationDataTransformers(a.transformers),{story_id:q},function(b){b.logging={composer_session_id:f},b.tracking=b.tracking?b.tracking.concat(p):[p],k.onReady(function(d){d=d.commit;d(g,b,{onCompleted:o(i),onError:n(i),updater:function(a){c("feedEditStoryLiveInsertUpdater")(q,a)},variables:{feedLocation:a.variables.feedLocation,renderLocation:a.variables.renderLocation}})})});else{var r=null,s=c("cometUniqueID")();if(a.composerType==="memories"){var t;t=((t=i.linkAttachment)==null?void 0:t.storyId)!=null?"THROWBACK_POST":"NOT_THROWBACK_POST";var u=i.goodwillCometMetadata;r={goodwill_comet_metadata:u,is_throwback_post:t}}var v=null;u=a.optimisticTransformers;var w=null;c("ifRequireable")("ComposerMediaFileUploader",function(a){w=a.getInstance(e),b("cr:1526618")&&b("cr:1526618").onSubmitPost(i.creationSessionID,d("VideoUploadSurface").VideoUploadSurfaceIDs.FEED)});var x=function(b){var c=new Error();b.error!=null&&(c.description=h._("Se ha producido un error. Vuelve a intentarlo. Comprueba tu conexi\u00f3n y el tama\u00f1o de los archivos.").toString());a&&a.onError(c,i);v&&v.dispose()},y={payload:d("getComposerLoggingPayload").getFeedComposerLoggingPayload(i)};l&&u&&c("transformComposerViewStateToCreationData")(i,d("transformersArrayHelpers").transformersArrayToCreationDataTransformers(u),babelHelpers["extends"]({composer_entry_point:a.composerEntryPoint,composer_source_surface:a.composerSourceSurface,composer_type:a.composerType,idempotence_token:a.creationSessionID+"_"+a.requestType,source:"WWW"},r),function(b){b.logging={composer_session_id:f},b.tracking=b.tracking?b.tracking.concat(p):[p],j.onReady(function(d){d=d.commitOptimistic;w&&w.errorObserver.subscribe(x);v=d(g,b,{optimisticResponse:c("generateOptimisticResponse")(e,b,i,f),optimisticUpdater:function(b){return a.optimisticUpdater&&a.optimisticUpdater(b,s)},variables:a.variables},y)})});c("transformComposerViewStateToCreationData")(i,d("transformersArrayHelpers").transformersArrayToCreationDataTransformers(a.transformers),babelHelpers["extends"]({composer_entry_point:a.composerEntryPoint,composer_source_surface:a.composerSourceSurface,composer_type:a.composerType,idempotence_token:a.creationSessionID+"_"+a.requestType,source:"WWW"},r),function(k){a.mutationDataValidator&&a.mutationDataValidator(k),k.logging={composer_session_id:f},k.tracking=k.tracking?k.tracking.concat(p):[p],j.onReady(function(j){j=j.commit;l?j(g,k,{onCompleted:function(c){v&&v.dispose();a&&a.onCompleted(c,i);w&&w.errorObserver.unsubscribe(x);b("cr:1526618")&&b("cr:1526618").onSubmitPostCompleted(i.creationSessionID,d("VideoUploadSurface").VideoUploadSurfaceIDs.FEED);c=(c=i.audience)==null?void 0:(c=c.privacy)==null?void 0:c.base_state;c===null||c===void 0?m(h._("Tu publicaci\u00f3n se ha compartido correctamente")):m(h._("Tu publicaci\u00f3n se ha compartido correctamente con {audience}",[h._param("audience",c)]))},onError:function(c){a&&a.onError(c,i),v&&v.dispose(),w&&w.errorObserver.unsubscribe(x),b("cr:1526618")&&b("cr:1526618").onSubmitPostError(i.creationSessionID,d("VideoUploadSurface").VideoUploadSurfaceIDs.FEED)},updater:function(b){a.updater(b,s)},variables:a.variables},y):j(g,k,{onCompleted:o(i),onError:n(i),optimisticResponse:c("generateOptimisticResponse")(e,k,i,f),optimisticUpdater:a.optimisticUpdater,updater:a.updater,variables:a.variables},y)})})}},[a,g,o,n,f,e,m]);return q}g["default"]=a}),98);
__d("doWithDockedFeedUnitRecords",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){a=a.getRoot();if(a==null)return;a=a.getLinkedRecord("viewer");if(a==null)return;var c=a.getLinkedRecords("docked_feed_units");c==null&&(c=[]);b(a,c.filter(Boolean))}f["default"]=a}),66);
__d("getMatcherFunctionForDockedFeedUnitWithId",[],(function(a,b,c,d,e,f){"use strict";function a(a){return function(b){b=b==null?void 0:b.getLinkedRecord("feed_unit");return(b==null?void 0:b.getValue("__typename"))==="Story"&&(b==null?void 0:b.getValue("id"))===a}}f["default"]=a}),66);
__d("dockFeedUnit",["doWithDockedFeedUnitRecords","getMatcherFunctionForDockedFeedUnitWithId"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,d){c("doWithDockedFeedUnitRecords")(b,function(e,f){var g,h=f.some(c("getMatcherFunctionForDockedFeedUnitWithId")(a));if(h)return;h=e.getOrCreateLinkedRecord("docked_feed_unit:"+a,"DockedFeedUnit").setValue(d,"visibility");g=(g=b.get(a))!=null?g:b.create(a,"Story").setValue(a,"id");g.setValue(!0,"is_docked");h.setLinkedRecord(g,"feed_unit");e.setLinkedRecords([].concat(f,[h]),"docked_feed_units")})}g["default"]=a}),98);